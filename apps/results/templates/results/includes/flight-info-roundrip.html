{% load custom_date %}
{% load airline_icons %}
{% load time_duration %}
{% load return_flight %}
<div class="flight-info-block d-flex flex-column w-100">
    <div class="departure-row d-flex justify-content-start">
        <div class="airline-logo-holder d-flex"
             data-stopnum="{{ flight.duration.total }}">
            {% for route in flight.route %}
                {% if route.return == 0 %}
                    <div class="img-airline">
                        <div class="airline">
                            <img src="/images/{{ route.airline |aircon }}.png"
                                 alt="AA"
                                 style="width:25px; margin-right: 4px;">
                        </div>
                    </div>
                {% endif %}
            {% endfor %}
        </div>
        <div class="d-flex justify-content-around w-100">
            <div class="">
                <label class="mb-0"><strong>
                    {{ flight.local_departure | iso_date | date:"h:i A" }} -
                    {{ flight.local_arrival | iso_date | date:"h:i A" }}</strong></label><br>
                <span class="small text-muted">
                        {{ flight.cityFrom }}
                        <i class="fa fa-long-arrow-right mr-1 ml-1"></i>
                        {{ flight.cityTo }}
                    </span>
            </div>
            <div class="">
                <label class="mb-0">
                    <strong>{{ flight.local_departure | iso_date | date:"D j M" }}</strong>
                </label>
                <br>
                <span class="small text-muted">{{ flight.duration.departure | secs2hm }}</span>
            </div>
            <div></div>
        </div>

    </div>
    <div class="flight-divider d-flex justify-content-start text-left mt-2 mb-2">
        <span style="width: 50px; border-bottom: 1px solid silver; height: 12px;"></span>
        <p class="small text-muted mb-0 ml-3">
            Stays about {{ flight.nightsInDest }} days
            in {{ flight.cityTo }}
        </p>
    </div>


    <div class="arrival-row d-flex justify-content-start">
        <div class="airline-logo-holder d-flex"
             data-stopnum="{{ flight.duration.total }}">
            {% for route in flight.route %}
                {% if route.return == 1 %}
                    <div class="img-airline">
                        <div class="airline">
                            <img src="/images/{{ route.airline |aircon }}.png"
                                 alt="AA"
                                 style="width:25px; margin-right: 4px;">
                        </div>
                    </div>
                {% endif %}
            {% endfor %}
        </div>
        <div class="d-flex justify-content-around w-100">

            <div class="">
                {% with flight.route|return_date|first as route_return %}
                    {% if route_return %}
                        <label class="mb-0"><strong>
                        {{ route_return.local_departure | iso_date | date:"h:i A" }}

                    {% endif %}
                {% endwith %}
                -
                {% with flight.route|return_date|last as route_return %}
                    {% if route_return %}
                        {{ route_return.local_arrival | iso_date | date:"h:i A" }}
                        </strong></label>
                    {% endif %}
                {% endwith %}
                <br>
                <span class="small text-muted"> {{ flight.cityTo }}
                                                    <i class="fa fa-long-arrow-right mr-1 ml-1"></i>
                                                        {{ flight.cityFrom }}
                                                </span>
            </div>
            {% with flight.route|last as route_last %}
                {% if route_last %}
                    <div class="">
                        <label class="mb-0">
                            <strong>{{ route_last.local_arrival | iso_date | date:"D j M" }}</strong>
                        </label>
                        <br>
                        <span class="small text-muted">{{ flight.duration.return | secs2hm }}</span>
                    </div>
                {% endif %}
            {% endwith %}
            <div></div>
        </div>
    </div>
</div>
